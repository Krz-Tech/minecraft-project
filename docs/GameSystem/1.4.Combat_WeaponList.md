# 戦闘システム：武器リストと強化仕様 (Weapon List & Enhancement)

## 概要
Tech::Playgroundで使用される武器のマスターリストと、バニラアイテムをTech仕様に「変換・強化」する仕組みについて定義します。

---

## 1. 武器の製造と実装 (Implementation)

本プロジェクトでは、バニラ武器をテック仕様に「変換」し、さらに高度な装備を専用プラグインで提供します。
具体的な武器データについては [アイテムデータベース (Docs/ItemDatabase/)](../ItemDatabase/0.ItemDatabase_Index.md) を参照してください。

### 1.1 開発スタック
*   **CustomCrafting (CC)**: バニラレシピの「[強化]版への変換」およびカスタムレシピ管理。
*   **ExecutableItems (EI)**: 高性能装備（ID付与アイテム）の独自ロジック、スキル、属性の実装。

### 1.2 バニラ武器の強化変換仕様
バニラの標準レシピ（例：棒＋鉄）で作成されたアイテムを、Tech仕様のアイテムに変換します。

*   **アイテム名**: `元の名称 [強化]` (例: `鉄の剣 [強化]`)
*   **メリット**: レシピがバニラ準拠のため、初心者でも直感的に作成可能。
*   **設定**: CustomCraftingのレシピ成果物として、強化済みNBT/CMDを持つアイテムを指定します。
### 1.3 変換ロジック (Skript)
`on craft` イベントを使用して、成果物を独自アイテムに差し替えます。（CustomCraftingの補助として使用）

```skript
on craft of iron sword or diamond sword:
    # 成果物を「[強化]版」に差し替え
    set {_item} to event-item
    set name of {_item} to "%name of {_item}% [強化]"
    set nbt of {_item} to nbt compound from "{CustomModelData:2001, TechItem:1}"
    set event-item to {_item}
```

### 1.4 強化内容
*   **攻撃力のオフセット**: バニラ値よりも高く設定（Tech SuitのAPに対応するため）。
*   **Custom Model Data**: サイバーパンク風の外見を適用（リソースパック）。
*   **追加属性**: 衝撃力 (Impact) や重量 (Weight) などをNBTで個別に管理。

---

## 3. 武器の入手経路

1.  **クラフト**: 生活ワールドでバニラ素材から「Enhanced」版を作成。
2.  **ショップ購入**: 完成済みの「Krzシリーズ」や「EN武器」をΔコインで購入。
3.  **プレイグラウンド (PG)**: 敵やチェストから現品（または設計図）をドロップ。

---

## 4. 技術メモ

*   **アイテム識別**: 全てのTech武器には `TechItem: 1` などの独自NBTタグを付与し、バニラアイテムとの混同を防ぎます。
*   **耐久値**: `Unbreakable: 1` を設定し、代わりに変数 `{-kp::%uuid%::equip::durability}` 等で独自に管理することを検討（UI表示のため）。

---

*最終更新: 2025-12-23*
