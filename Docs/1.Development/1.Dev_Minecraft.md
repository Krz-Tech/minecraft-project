ファイル：`Docs/1.Development/1.Dev_Minecraft.md`
更新日時：`2025/12/31`

# Minecraftサーバー開発
本プロジェクトにおけるMinecraftサーバー開発の基本規約です。

## 1. サーバーソフトウェア
* 本プロジェクトでは**PaperMC 1.21.4**を使用します。
* プロキシサーバーとして**Velocity**を使用します。
* [PaperMC公式](https://papermc.io/)
* [PaperMC Documentation](https://docs.papermc.io/)
* [Velocity Documentation](https://docs.papermc.io/velocity)

## 2. プラグイン管理
### 導入プラグイン一覧

| プラグイン | 用途 |
|:---|:---|
| Skript | スクリプトベースの機能開発 |
| skBee | Skript拡張（NBT、パーティクル等） |
| skript-reflect | Skript拡張（Java API直接アクセス） |
| LuckPerms | 権限管理 |
| WorldEdit | ワールド編集 |
| WorldGuard | 領域保護 |
| ProtocolLib | パケット操作 |
| ViaVersion | バージョン互換 |
| DiscordSRV | Discord連携 |
| Bluemap | ウェブマップ |

### プラグイン追加ルール
* プラグインの追加・削除はプロジェクト管理者の承認が必要です。
* 導入するプラグインは必ず本ドキュメントに追記してください。

### プラグイン設定
* 設定ファイルの変更は開発サーバーでテスト後、本番環境に適用してください。
* 設定変更時は変更内容と理由を記録してください。

## 3. サーバー設定
### server.properties
* `gamemode`: survival
* `difficulty`: normal
* `online-mode`: true（本番環境はVelocityプロキシがあるため原則false）
* `spawn-protection`: 0（Worldguardで保護）

### bukkit.yml / spigot.yml / paper.yml
* パフォーマンス関連の設定は慎重に変更してください。
* 変更時は必ずベンチマークを取り、影響を確認してください。

## 4. ワールド管理
* ワールドデータは定期的にバックアップを取得してください。
* ワールドの追加・削除はプロジェクト管理者の承認が必要です。

## 5. 権限管理
* 権限プラグインを使用し、ロールベースで権限を管理してください。
* 権限グループの定義はドキュメント化してください。

## 6. コマンド
### 基本コマンド
* `/reload confirm` - プラグインの再読み込み（非推奨、再起動を推奨）
* `/stop` - サーバー停止
* `/whitelist add <player>` - ホワイトリスト追加

### Skript関連
* `/sk reload <ファイル名>` - Skriptの再読み込み
* `/sk info` - Skript情報表示

## 7. パフォーマンス監視
* `/timings on` / `/timings report` - パフォーマンス計測
* `/spark profiler` - Sparkプラグインによる詳細プロファイリング

## 8. 参照ドキュメント
* [Minecraft Wiki](https://minecraft.wiki/)
* [PaperMC Docs](https://docs.papermc.io/)
* [SpigotMC Wiki](https://www.spigotmc.org/wiki/spigot/)
