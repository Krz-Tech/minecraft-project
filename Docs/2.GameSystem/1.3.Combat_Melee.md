# 戦闘システム：近接武器 (Combat: Melee Weapons)

## 概要
Tech::Playgroundにおける近接戦闘は、単なる「剣の振り回し」ではなく、機動力とFCS（スマートエイム）を活かした **「超高速の接敵と離脱」** を重視します。

---

## 1. 近接武器カテゴリ (Categories)

| カテゴリ | 代表的な装備 | 特徴 |
|---------|------------|------|
| **バニラ武器** | 鉄の剣、斧 | ステータス補正はないが、ENを消費せず誰でも扱える基本装備。 |
| **物理ブレード** | 強化合金刀 | 高い衝撃力と物理ダメージ。ENを消費しない。 |
| **ENブレード** | プラズマカッター | 高ダメージ。攻撃ごとに **EN** を消費。装甲貫通能力が高い。 |
| **パイルバンカー** | 撃針射出機 | **超高衝撃力**。振りが非常に遅いが、一撃で敵をスタッガーに追い込む。 |

---

## 2. 独自メカニクス (Mechanics)

### 2.1 近接ステップイン (Step-in Assist)
*   **仕様**: ロックオン中に攻撃を行うと、対象との距離に応じて **前方に急加速** し、間合いを詰めます。
*   **踏み込み距離**: FCSの性能および武器種に依存（例：ブレードは5m、パイルは2m）。
*   **メリット**: 3人称視点特有の「空振り」を防止し、スピード感を演出。

### 2.2 衝撃蓄積 (Stagger Impact)
*   近接武器は射撃武器に比べて **1撃あたりの衝撃力 (Impact)** が高く設定されています。
*   特にパイルバンカーなどは、ガード中の敵に対しても強制的に衝撃を蓄積させることが可能です。

### 2.3 コンボと硬直 (Combo & Recovery)
*   **コンボ**: 左クリック連打により、最大3段までの連続攻撃が可能（武器の `Custom Model Data` によるアニメーション演出）。
*   **硬直**: 攻撃後はわずかな「放熱・再装填時間」が発生し、その間はアサルトダッシュや再攻撃が制限されます。

---

## 3. 演出 (VFX/SFX)

### 視覚演出 (VFX)
*   **軌跡エフェクト**: 武器の振りに合わせて `SWEEP_ATTACK` や `ELECTRIC_SPARK` の軌跡を表示。
*   **ヒットストップ**: 命中時にごくわずかな（1tick）の鈍化を攻撃者に与え、「手応え」を演出。

### 聴覚演出 (SFX)
*   **ブレード**: 「シュイン！」という鋭い風切り音と、命中時の「ガキィィィン！」という金属音。
*   **パイル**: 「ドォォォォン！」という重厚な爆発駆動音。

---

## 4. 技術メモ (Technical Notes)

*   **踏み込み実装**: `on damage` ではなく `on left click` で判定を行い、対象がいれば `push player towards targeted entity with force ...` を実行。
*   **攻撃範囲判定**: バニラのリーチを `skript-reflect` で拡張、または不可視の `interaction` エンティティを前方に配置して判定を強化。
*   **EN消費**: ENブレード系武器は `on left click` 時にプレイヤーの変数をチェックし、EN不足なら攻撃力を大幅に下げる（または振れないようにする）。

---

*最終更新: 2025-12-23*
