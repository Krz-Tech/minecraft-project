# 高速機動システム：アサルトダッシュ (High-Speed Mobility: Assault Dash)

## 概要
Code::Playgroundの機動力の核となるシステムです。
バニラのダッシュを拡張し、ENを消費して高速移動を行う **「アサルトダッシュ (AD)」** を定義します。

---

## 1. アサルトダッシュ (Assault Dash / AD)
長距離の移動や、敵への急速接近に使用する「巡航モード」です。

### 仕様 (Specifications)
*   **発動条件**: 通常ダッシュ状態を **1.5秒間** 継続する。
*   **コスト**: 継続的に **EN** を消費 (例: 5 EN/sec)。
*   **効果**:
    *   **移動速度**: 通常ダッシュの 1.5倍〜2.0倍 (SuitのMOB値に依存)。
    *   **ジャンプ力**: 通常時の 1.2倍〜1.5倍に強化（高速移動からの慣性ジャンプ）。
    *   **視野角 (FOV)**: わずかに拡大し、スピード感を演出。
    *   **スタッガー耐性**: 蓄積値がわずかに軽減される（勢いで耐える）。
*   **解除条件**: 停止、EN枯渇、または攻撃（近接・射撃）の開始。
    *   **注記**: バニラの仕様に合わせて、**ジャンプしてもアサルトダッシュ状態は継続**されます（空中で加速が維持される）。

---

## 2. クイックブースト (Quick Boost / QB)
瞬間的に強力なブーストを噴射し、全方位への急加速・回避を行う機能です。

### 仕様 (Specifications)
*   **発動方法**: **Fキー (オフハンドへの持ち替え)** を入力。
*   **コスト**: 一括で **15 EN** を消費。
*   **クールタイム**: **0.5秒 (10 ticks)**。連続使用は可能だが、EN切れに注意が必要。
*   **挙動**:
    *   **移動中**: 入力方向（W/A/S/D）へ強力な加速。地上では少し浮き上がり摩擦を軽減する。
    *   **静止中**: 後方へ緊急回避ブースト。
    *   **空中**: 慣性を維持したまま方向転換が可能。

---

## 3. 演出 (VFX/SFX)

### 視覚演出 (VFX)
*   **アサルトダッシュ**: プレイヤーの背後から `DUST` (カラー指定可能) と `ELECTRIC_SPARK` または `FLAME` パーティクルをコーン状に噴射します。
*   **クイックブースト**: 発動位置に `FLASH` と `CLOUD` パーティクルを発生させ、瞬間的な爆発力を視覚化します。
*   **色変更**: `/dash color <cyan|orange|red|purple>` でブーストの色を変更可能（実装済み）。

### 聴覚演出 (SFX)
*   **発動音**: 爆発音と高周波の駆動音。
*   **持続音**: `item.elytra.flying` と `block.fire.ambient` によるジェット噴射音のループ。
*   **クイックブースト**: `entity.firework_rocket.launch` と `item.trident.riptide` による鋭い噴射音。

---

## 4. ステータスによる変化 (Stat Scaling)

性能は装備している **Tech Suit** および **Accessory** によって変化します。

| パラメータ | 影響するステータス | 説明 |
|-----------|------------------|------|
| **最大速度** | MOB (Suit) | スーツの基本機動力。 |
| **消費効率** | Energy (Skill) | スキルレベルが高いほど消費が減り、長く走れる。 |
| **回復速度** | Generator (Acc) | 非ブースト時のEN回復速度。 |

---

## 5. 技術メモ (Technical Notes)

*   **巡航モードの実装**: Skriptでプレイヤーの `allow flight` を有効にし、`fly speed` と `walk speed` を調整することで、空中でも速度を維持したまま移動できる「巡航」を実現しています。
*   **QBのベクトル計算**: 前回の位置と現在の位置の差分から移動ベクトルを算出し、その方向へ `push` を行います。静止時は視線の逆方向へ飛ばします。
*   **EN管理**: `every 10 ticks` ループで継続消費を行い、ENが切れた時点で `dash_stop` を呼び出します。

---

*最終更新: 2025-12-24*

