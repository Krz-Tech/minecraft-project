# rclone設定用Secret
# Garage S3への接続情報を格納

apiVersion: v1
kind: Secret
metadata:
  name: rclone-config
  namespace: minecraft
  labels:
    app.kubernetes.io/name: rclone
    app.kubernetes.io/component: sync
type: Opaque
stringData:
  rclone.conf: |
    [garage]
    type = s3
    provider = Other
    endpoint = http://garage.garage.svc.cluster.local:3900
    access_key_id = REPLACE_WITH_ACCESS_KEY
    secret_access_key = REPLACE_WITH_SECRET_KEY
    force_path_style = true
    region = garage

---
# 注意: 本番環境では SealedSecrets または External Secrets Operator を使用して
# シークレットを安全に管理してください。
#
# 設定手順:
# 1. Garageでアクセスキーを作成:
#    kubectl exec -n garage garage-0 -- ./garage key create krz-minecraft
# 2. 出力されたキーでこのファイルを更新
# 3. kubectl apply -f rclone-secret.yaml
